function dayRank(e){return days=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],days.indexOf(e)}function dayname(e){return day=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date(e).getDay()]}function timeConvert(e){return(e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[5]=+e[0]<12?" AM":" PM",e[0]=+e[0]%12||12),e.join("")}$(function(){$("#dob").datepicker({changeMonth:!0,changeYear:!0})}),$("#products").change(function(e){e.preventDefault(),$("#day").datepicker("destroy");let t=$(this).val();$.ajax({type:"GET",url:BASE_URL+"/vaccine/data/"+t,dataType:"json",success:function(e){let t=e;function n(e){return dmy=e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear(),-1==$.inArray(dmy,s)?[!0,""]:[!1,"","Unavailable"]}var a=[];function i(e){var t=!0;return a.includes(e.getDay())&&(t=!1),[t]}function o(e){dmy=e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear();return[!a.includes(e.getDay())&&-1==$.inArray(dmy,s)]}if(t.has_diff_ages&&t.diff_ages){$(".option_input").show(),$("#age").empty(),$(".option_input .list").empty();let e=t.diff_ages;$("#age").append("<option>Select one age</option>"),$(".option_input .nice-select span").text("Select one age"),e.forEach(e=>{let t=e.age;$("#age").append("<option value='"+t+"'>"+t+"</option>"),$(".option_input .list").append(`<li data-value="${t}" class="option selected"  onclick="\n                            $('#age').val($('.option_input .current').text());\n\n                            $('#age option').removeAttr('selected')\n                            document.querySelectorAll('#age option')[$(this).index()+1].setAttribute('selected', true)\n                        ">${t}</li>`)})}else $("#age").empty(),$(".option_input").hide();if(t.definded_period){let e=t.from,l=t.to;var s=t.exceptions;t.weekends.forEach(e=>{a.push(dayRank(e))}),t.weekends.length>0&&t.exceptions?$("#day").datepicker({changeMonth:!0,numberOfMonths:1,dateFormat:"yy-mm-dd",maxDate:new Date(l),minDate:new Date(e),beforeShowDay:o}):t.weekends.length>0?$("#day").datepicker({changeMonth:!0,numberOfMonths:1,dateFormat:"yy-mm-dd",maxDate:new Date(l),minDate:new Date(e),beforeShowDay:i}):t.exceptions?$("#day").datepicker({changeMonth:!0,numberOfMonths:1,dateFormat:"yy-mm-dd",maxDate:new Date(l),minDate:new Date(e),beforeShowDay:n}):$("#day").datepicker({changeMonth:!0,numberOfMonths:1,dateFormat:"yy-mm-dd",maxDate:new Date(l),minDate:new Date(e)})}else{s=t.exceptions;t.weekends.forEach(e=>{a.push(dayRank(e))}),t.weekends.length>0&&t.exceptions?$("#day").datepicker({changeMonth:!0,numberOfMonths:1,dateFormat:"yy-mm-dd",minDate:0,beforeShowDay:o}):t.weekends.length>0?$("#day").datepicker({changeMonth:!0,numberOfMonths:1,dateFormat:"yy-mm-dd",minDate:0,beforeShowDay:i}):t.exceptions?$("#day").datepicker({changeMonth:!0,numberOfMonths:1,dateFormat:"yy-mm-dd",minDate:0,beforeShowDay:n}):$("#day").datepicker({changeMonth:!0,numberOfMonths:1,dateFormat:"yy-mm-dd",minDate:0})}if(t.eligapilities){let e=t.eligapilities;$("#eligapility_content").empty();let n=e.title;$("#eligap_title").text(n),e.eligapilities.forEach(e=>{let t=e.eligapility;$("#eligapility_content").append(`\n                    <div class="form-group options clearfix d-flex justify-content-between align-items-center mb-0 mb-lg-2 mb-xl-3">\n                        <em> â€¢ ${t}</em>\n                        <label class="switch-light switch-ios float-right">\n                            <input type="checkbox" onclick='clickCheckbox(this)' value="${t}" name="eligapility" id="">\n                            <span>\n                                <span>No</span>\n                                <span>Yes</span>\n                            </span>\n                            <a></a>\n                        </label>\n                    </div>\n                    `)})}if(t.questions){let e=t.questions;$("#question_section").empty(),e.forEach((e,t)=>{$("#question_section").append(`\n                    <div class="styled-select clearfix">\n                        <label class="mt-3">${e.question}</label>\n                        <div class="form-group">\n                            <select style='display:none;' name="${e.question}" id="question_${t}" class="form-control">\n                                <option>Select one</option>\n                            </select>\n                            <input type="hidden">\n                            <div class="nice-select nice-select-${t} form-control" tabindex="0">\n                                <span class="current">Select one</span>\n                                <ul class="list list_question">\n\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                    `),e.options.forEach(e=>{$("#question_"+t).append(`\n                        <option vlaue="${e.value}">${e.option}</option>\n                    `),$(`.nice-select-${t} .list_question`).append(`\n                        <li class="option selected" onclick="\n                            // console.log($(this).text());\n                            // // $(this).parent().parent().siblings('input').val($(this).text());\n                            // console.log($(this).parent().parent().siblings('select').val());\n                            $('#question_${t} option').removeAttr('selected')\n                            document.querySelectorAll('#question_${t} option')[$(this).index()+1].setAttribute('selected', true)\n                        ">${e.option}</li>\n                    `)})})}if(t.conditions){let e=t.conditions,n=e.title;$("#condition_page_title").text(n),$("#condition_list").empty(),e.conditions.forEach(e=>{$("#condition_list").append(`\n                        <div class="form-group options clearfix d-flex justify-content-between align-items-center">\n                            <em>${e.condition}</em>\n                        </div>\n                    `)})}}}),$("#day").change(function(e){e.preventDefault();let n=$(this).val();$.ajax({type:"GET",url:BASE_URL+"/interval/"+t+"/"+n,data:{vaccine:t},dataType:"json",success:function(e){let t=e;console.log(e),$("#ChooseTime").empty(),$(".myTime ul").empty(),""==e&&(console.log("mohamed"),$(".myTime span").text("Choose a time")),t.forEach(e=>{let t=timeConvert(e);$("#ChooseTime").append("<option value='"+t+"'>"+t+"</option>"),$(".myTime ul").append(`\n                        <li class="option selected" data-value="${t}" onclick="\n                            document.querySelectorAll('#ChooseTime option').forEach(e => {\n                                e.removeAttribute('selected')\n                            })\n                            document.querySelectorAll('#ChooseTime option')[$(this).index()+1].setAttribute('selected', true)\n                            $('#ChooseTime').val($('.myTime .current').text());\n\n                            ">${t}</li>\n\n                        `)})}})})});
